#ifndef MM_MMEMORY_H
#define MM_MMEMORY_H

#include "err_codes.h"

#ifndef VIRT_ADDR
#define VIRT_ADDR
typedef char *VA;
typedef const VA const_VA;
#endif

/**
 	@func	malloc_
 	@brief	Выделяет блок памяти определенного размера

	@param	[out] ptr		адресс блока
	@param	[in]  szBlock	размер блока

	@return	код ошибки
	@retval	0	успешное выполнение
	@retval	-1	неверные параметры
	@retval	-2	нехватка памяти
	@retval	1	неизвестная ошибка
 **/
int malloc_(VA *ptr, size_t szBlock);



/**
 	@func	free_
 	@brief	Удаление блока памяти

	@param	[in] ptr		адресс блока

	@return	код ошибки
	@retval	0	успешное выполнение
	@retval	-1	неверные параметры
	@retval	1	неизвестная ошибка
 **/
int free_(VA ptr);



/**
 	@func	read_
 	@brief	Чтение информации из блока памяти

	@param	[in] ptr		адресс блока
	@param	[in] pBuffer	адресс буфера куда копируется инфомация
	@param	[in] szBuffer	размер буфера

	@return	код ошибки
	@retval	0	успешное выполнение
	@retval	-1	неверные параметры
	@retval	-2	доступ за пределы блока
	@retval	1	неизвестная ошибка
 **/
int read_(VA ptr, void *pBuffer, size_t szBuffer);



/**
 	@func	write_
 	@brief	Запись информации в блок памяти

	@param	[in] ptr		адресс блока
	@param	[in] pBuffer	адресс буфера куда копируется инфомация
	@param	[in] szBuffer	размер буфера

	@return	код ошибки
	@retval	0	успешное выполнение
	@retval	-1	неверные параметры
	@retval	-2	доступ за пределы блока
	@retval	1	неизвестная ошибка
 **/
int write_(VA ptr, void *pBuffer, size_t szBuffer);



/**
 	@func	init_
 	@brief	Инициализация модели менеджера памяти

	@param	[in] n		количество страниц
	@param	[in] szPage	размер страницы

	@return	код ошибки
	@retval	0	успешное выполнение
	@retval	-1	неверные параметры
	@retval	1	неизвестная ошибка
 **/
int init_(int, int);



/**
 	@func	destroy_
 	@brief	Удаление модели менеджера памяти
**/
void destroy_();

#endif //MM_MMEMORY_H
